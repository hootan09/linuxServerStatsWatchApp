<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Linux Watch Face</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{
    --bg:#111;
    --fg:#a6ffa6;
    --accent:#00f2ff;
    --warn:#ffb800;
    --danger:#ff4d4d;
    --font: "SFMono-Regular", "Consolas", monospace;
    --radius:24px;
}
* {box-sizing:border-box; margin:0; padding:0;}
body{
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:#000;
    font-family:var(--font);
    color:var(--fg);
}
.watch{
    width:260px;
    height:260px;
    background:var(--bg);
    border-radius:var(--radius);
    box-shadow:0 0 0 3px #222, 0 0 25px #000;
    padding:18px;
    display:flex;
    flex-direction:column;
    gap:10px;
    font-size:12px;
    line-height:1.3;
    letter-spacing:.4px;
}
header{
    display:flex;
    justify-content:space-between;
    font-size:11px;
    color:var(--accent);
}
.bar{
    height:4px;
    background:#222;
    border-radius:2px;
    overflow:hidden;
}
.bar div{
    height:100%;
    background:var(--accent);
    width:var(--w,0%);
    transition:width .3s;
}
.row{
    display:flex;
    justify-content:space-between;
}
.row.center{justify-content:center;}
.warn {color:var(--warn);}
.danger{color:var(--danger);}
.label{opacity:.65;}
/* grid for mini blocks */
.grid{
    display:flex;
    gap:6px;
}
.block{
    flex:1;
    text-align:center;
    background:#1a1a1a;
    border-radius:4px;
    padding:4px 0;
}
.block .val{font-size:13px;}
.block .lab{font-size:9px; opacity:.6;}
</style>
</head>
<body>

<div class="watch">

  <header>
    <span id="time">09:22:55</span>
    <span id="bat">66%</span>
  </header>

  <!-- CPU -->
  <div class="row">
    <span>CPU</span>
    <span id="cpu-val">45.2%</span>
  </div>
  <div class="bar"><div id="cpu-bar" style="--w:45%"></div></div>

  <!-- Memory -->
  <div class="row">
    <span>RAM</span>
    <span id="ram-val">3.2G / 7.8G</span>
  </div>
  <div class="bar"><div id="ram-bar" style="--w:41%"></div></div>

  <!-- Storage -->
  <div class="row">
    <span>Storage</span>
    <span id="disk-val">28G / 118G</span>
  </div>
  <div class="bar"><div id="disk-bar" style="--w:24%"></div></div>

  <!-- Network -->
  <div class="row">
    <span>NET</span>
    <span id="net-val" class="warn">▲ 1.2M ▼ 5.4M</span>
  </div>

  <!-- Uptime / Load -->
  <div class="row">
    <span class="label">up</span>
    <span id="uptime">2d 14h 07m</span>
    <span class="label">load</span>
    <span id="load">0.73 0.81 0.92</span>
  </div>

  <!-- mini blocks: procs, temp, root, home -->
  <div class="grid">
    <div class="block">
      <div class="val" id="procs">137</div>
      <div class="lab">proc</div>
    </div>
    <div class="block">
      <div class="val" id="temp">51°</div>
      <div class="lab">temp</div>
    </div>
    <div class="block">
      <div class="val" id="root-free">12G</div>
      <div class="lab">root</div>
    </div>
    <div class="block">
      <div class="val" id="home-free">76G</div>
      <div class="lab">home</div>
    </div>
  </div>

</div>

<!-- optional live update -->
<script>
async function fetchStats(){
    const r = await fetch('http://localhost:8000/stats');
    const d = await r.json();

    // time & battery
    document.getElementById('time').textContent = d.time;
    document.getElementById('bat').textContent = d.bat + '%';

    // CPU
    document.getElementById('cpu-val').textContent = d.cpu + '%';
    document.getElementById('cpu-bar').style.setProperty('--w', d.cpu);

    // RAM
    const ramUsed = d.memUsed, ramTotal = d.memTotal;
    document.getElementById('ram-val').textContent =
        `${(ramUsed/1024).toFixed(1)}G / ${(ramTotal/1024).toFixed(1)}G`;
    document.getElementById('ram-bar').style.setProperty('--w', ramUsed/ramTotal*100);

    // Disk
    document.getElementById('disk-val').textContent = `${d.diskUsed} / ${d.diskTotal}`;
    document.getElementById('disk-bar').style.setProperty('--w',
        parseInt(d.diskUsed)/parseInt(d.diskTotal)*100);

    // Network
    document.getElementById('net-val').textContent =
        `▲ ${d.net.tx}M ▼ ${d.net.rx}M`;

    // Uptime / load
    document.getElementById('uptime').textContent = d.uptime;
    document.getElementById('load').textContent = d.load;

    // mini blocks
    document.getElementById('procs').textContent = d.procs;
    document.getElementById('temp').textContent = d.temp + '°';
    document.getElementById('root-free').textContent = d.diskAvail;
    document.getElementById('home-free').textContent = d.homeFree;
}

setInterval(fetchStats, 3000);
fetchStats();
</script>

</body>
</html>